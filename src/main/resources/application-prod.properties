# Production Configuration
spring.application.name=phishing-detector

# Server Configuration
server.port=${PORT:8080}
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.same-site=strict
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# Database Configuration (Use PostgreSQL in production)
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/phishing_detector}
spring.datasource.username=${DB_USERNAME:phishing_user}
spring.datasource.password=${DB_PASSWORD:secure_password_123!}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# JPA Configuration
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true

# H2 Console (DISABLED in Production)
spring.h2.console.enabled=false

# Security Configuration
spring.security.user.name=${ADMIN_USERNAME:admin}
spring.security.user.password=${ADMIN_PASSWORD:}
spring.security.user.roles=ADMIN

# Logging Configuration
logging.level.com.security.phishing_detector=WARN
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=ERROR
logging.level.org.springframework.web=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# Log to file in production
logging.file.name=logs/phishing-detector.log
logging.logback.rollingpolicy.max-file-size=10MB
logging.logback.rollingpolicy.max-history=30

# Threat Intelligence Configuration
threat.intelligence.enabled=true
threat.intelligence.cache.size=50000
threat.intelligence.update.interval=1800000
phishtank.api.url=https://data.phishtank.com/data/online-valid.json
phishtank.api.key=${PHISHTANK_API_KEY:}

# Rate Limiting Configuration
rate.limit.enabled=true
rate.limit.requests.per.minute=5
rate.limit.requests.per.hour=25
rate.limit.redis.enabled=true
rate.limit.redis.host=${REDIS_HOST:localhost}
rate.limit.redis.port=${REDIS_PORT:6379}
rate.limit.redis.password=${REDIS_PASSWORD:}

# CORS Configuration (Restrictive in production)
cors.allowed.origins=${ALLOWED_ORIGINS:http://localhost:8080,https://localhost:8080}
cors.allowed.methods=GET,POST,OPTIONS
cors.allowed.headers=Content-Type,Authorization,X-Requested-With
cors.allow.credentials=true
cors.max.age=3600

# File Upload Configuration (Restrictive)
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=1MB
spring.servlet.multipart.max-request-size=1MB

# Management Endpoints (Secured)
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.security.enabled=true
management.endpoints.web.base-path=/actuator
management.endpoints.web.exposure.exclude=env,beans

# Error Handling (Restrictive)
server.error.include-message=on-param
server.error.include-binding-errors=on-param
server.error.include-stacktrace=never
server.error.include-exception=false

# SSL/TLS Configuration (if using HTTPS)
server.ssl.enabled=${SSL_ENABLED:false}
server.ssl.key-store=${SSL_KEYSTORE_PATH:}
server.ssl.key-store-password=${SSL_KEYSTORE_PASSWORD:}
server.ssl.key-store-type=${SSL_KEYSTORE_TYPE:PKCS12}
server.ssl.key-alias=${SSL_KEY_ALIAS:}

# Monitoring and Metrics
management.metrics.export.jmx.enabled=true
management.metrics.export.prometheus.enabled=${PROMETHEUS_ENABLED:false}

# External API Timeouts
spring.web.client.connect-timeout=5000
spring.web.client.read-timeout=10000